<app-navbar></app-navbar>
<div class="container mt-5">
  <h2 class="text-center mb-4" *ngIf="!editMode">Nouvelle vente</h2>
  <h2 class="text-center mb-4" *ngIf="editMode">Modifier une vente</h2>

  <div class="card">
    <div class="card-body">
      <form (ngSubmit)="saveVente()">
        <!-- Produit -->
        <div class="form-group mb-3">
          <label for="produit" class="form-label">Produit</label>
          <select
            id="produit"
            [(ngModel)]="vente.produit"
            name="produit"
            class="form-control"
            required>
            <option *ngFor="let produit of produits" [ngValue]="produit">
              {{ produit.id }}
            </option>
          </select>
        </div>

        <!-- Client -->
        <div class="form-group mb-3">
          <label for="client" class="form-label">Client</label>
          <select
            id="client"
            [(ngModel)]="vente.client"
            name="client"
            class="form-control"
            required>
            <option *ngFor="let client of clients" [ngValue]="client">
              {{ client.id }} - {{ client.nom }}
            </option>
          </select>
        </div>

        <!-- Quantité -->
        <div class="form-group mb-3">
          <label for="quantite" class="form-label">Quantité</label>
          <input
            type="number"
            id="quantite"
            [(ngModel)]="vente.quantite"
            name="quantite"
            class="form-control"
            required>
        </div>

        <!-- Date -->
        <div class="form-group mb-3">
          <label for="date" class="form-label">Date</label>
          <input
            type="date"
            id="date"
            [(ngModel)]="vente.date"
            name="date"
            class="form-control"
            required>
        </div>

        <!-- Buttons -->
        <div class="d-flex justify-content-between">
          <button type="submit" class="btn btn-success">
            {{ editMode ? 'Modifier' : 'créer' }}
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            (click)="router.navigate(['/ventes'])">
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
